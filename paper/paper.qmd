---
title: "Age, Education, Income, and the Canadian Vote. Understanding the 2021 election."
author: Allen Uy
thanks: "Code and data are available at: https://github.com/varygx/CES2021."
date: today
date-format: long
abstract: "This study examines the factors shaping support for Canada's major parties, the Liberal and Conservative, during the 2021 federal election. Analyzing personal and topical variables, we discovered that age has minimal impact, higher education correlates with increased Liberal support, and higher income is linked to Conservative favor. These insights offer a comprehensive understanding of the 2021 election dynamics, enabling more informed predictions for the upcoming 2025 election. This research contributes to a better grasp of Canadian political affiliations, assisting citizens and policymakers in adapting to evolving electoral trends."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library("tidyverse")
library("arrow")
library("here")
library("knitr")
library("kableExtra")

ces21_data <- read_parquet(here::here("data/analysis_data/clean_ces2021.parquet"))
```

# Introduction

The two largest political parties in Canada, the Liberal Party and Conservative party won 160 and 119 out of 338 seats respectively in the 44th federal election held in 2021 (@citeSeats). With the 45th federal election approaching in 2025, this paper conducts an analysis on the political support for these two parties, specifically examining personal and topical variables. The estimand of interest in this research is the average causal effect of these variables on the likelihood of individuals expressing support for either the Liberal or Conservative party.

By exploring personal and topical variables, this paper aims to provide insight into the factors that influenced political support for the Liberal and Conservative parties in Canada. The goal is to provide a clearer understanding of the dynamics that shaped the 2021 election and offer insights into broader patterns of political affiliations in the Canadian context, which could be used for inference in the upcoming election.

The subsequent sections follow a structured format. The Data section outlines the source and variables central to our analysis. The Model section details the construction and methodology of the statistical models used. The Results section presents the key findings of our analysis, while the Discussion section critically reviews the content, addresses the implications of the results, acknowledges model limitations, and suggests potential future research directions.

# Data {#sec-data}

The data used in this paper was gathered from the 2021 Canadian Election Study (CES) hosted on the Harvard Dataverse (@citeCES) and analyzed using R (@citeR) with help from `tidyverse` (@citeTidyverse), `haven` (@citeHaven), `arrow` (@citeArrow), `rstanarm` (@citeRstanarm), `modelsummary` (@citeModelsummary), `testthat` (@citeTestthat), `here` (@citeHere), `knitr` (@citeKnitr), and `kableExtra` (@citeKableExtra).

## CES2021

The dataset was gathered by CES through an online survey via the Leger Opinion platform where data was finalized on November 1, 2023. A total of 20968 responses were recorded with the stratification goals contained in [Appendix -@sec-stratification-goals].

The survey was launched during what they defined as the Campaign Period Survey (CPS) during August 17 to September 19, 2021 and a follow-up Post-Election Survey (PES) had 15069 responses during September 23 to October 4, 2021.

The provided data was cleaned by CES to include mostly high-quality responses, the details of which can be found in [Appendix -@sec-response-quality].

The dataset includes 1059 variables, many of which could have been included in the analysis but was narrowed down to 30 variables that could correlate with party support.

These variables are gathered from the CPS portion of the survey with no open-ended answers and assigned numerical values with labels.

### Personal Variables

Age was calculated in years based on the year of birth the respondent inputted. Education, Employment, Religion, Immigration Status, and Province were given a number with a corresponding label based on which radio button the respondent selected. Income category was given a number corresponding to a range of household incomes. Respondents were asked to input their income or if they felt uncomfortable to only specify the range. Exact income numbers were converted to their appropriate range. A preview of personal variables can be seen in @tbl-personal_var.

```{r, echo=FALSE}
#| label: tbl-personal_var
#| tbl-cap: Sample of Personal Variable Data
head(ces21_data, 5) %>% 
  select(age, education, income_cat) %>% 
  kable() %>% kable_styling(latex_options = "scale_down")
```

### Topic Variables

The following survey topics were extracted from the dataset: Economy, Healthcare, Immigration, COVID, Environment, Quebec Sovereignty, Government Spending, Education, Housing, Carbon Tax, and Childcare. Variables ending in `_party` indicate the party which the respondent believes would handle the best. The survey was designed to give only half the surveyees this question. Other variables are from questions with responses such as: "(strongly) disagree, neutral, (strongly) agree" where the respondent selected one of those answers or did not answer. A preview of topic variables can be seen in @tbl-topic_var.

```{r, echo=FALSE}
#| label: tbl-topic_var
#| tbl-cap: Sample of Topic Variable Data
head(ces21_data, 5) %>% 
  select(econ_party, healthcare_party, imm_party, covid_party) %>% 
  kable() %>% kable_styling(latex_options = "scale_down")
```

### Party Variables

Depending on the surveyee's circumstances, the survey asked which party they voted for in advance, will vote for, are likely to vote for, or would vote for if possible. Only one of these questions was ever asked so we aggregated those columns into a single `voted_for` variable, filtered to the Liberal and Conservative parties. A preview of the `voted_for` variable can be seen in @tbl-personal_var.

```{r, echo=FALSE}
#| label: tbl-party_var
#| tbl-cap: Sample of the Party the Respondent Supports
head(ces21_data, 5) %>% 
  select(voted_for) %>% 
  kable() %>% kable_styling()
```

# Model

We investigate model that might explain political support. A logistic regression model using age, education, and income.

## Model set-up

Define $y_i$ as the political preference of the respondent and equal to 1 if Liberal and 0 if Conservative. Then age, education, and income are the respective answers of the respondent.

\begin{align*}
y_i|\pi_i &\sim \mbox{Bern}(\pi_i) \\ 
\text{logit}(\pi_i) &= \beta_0 + \beta_1 \times \text{age}_i + \beta_2 \times \text{education}_i + \beta_3 \times \text{income}_i \\ 
\beta_0 &\sim \text{Normal}(0, 2.5) \\ 
\beta_1 &\sim \text{Normal}(0, 2.5) \\ 
\beta_2 &\sim \text{Normal}(0, 2.5) \\ 
\beta_3 &\sim \text{Normal}(0, 2.5) \\ 
\end{align*}

We assume Normal priors.

# Results

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

library("rstanarm")

personal_model <-
  readRDS(file = here::here("models/personal_model.rds"))

# topic_model <-
#   readRDS(file = here::here("models/topic_model.rds"))
```

```{r}
#| echo: false
#| eval: true
#| label: tbl-personal_modelresults
#| tbl-cap: "Explanatory model of party support based on age, education, and income"
#| warning: false
#| fig-height: 5
#| scale: 

library("modelsummary")

tab <- modelsummary::modelsummary(
  list(
    "Personal model" = personal_model
  ),
  statistic = "mad",
  fmt = 2,
  output = "kableExtra"
)

tab %>% kable_styling(latex_options = "scale_down")
```

Based on @tbl-personal_modelresults we observe that age has little effect on party support. It also suggests those with higher education are likely to vote Liberal while those with higher income are more likely to vote Conservative.

# Discussion

## Lack of Topical Model {#sec-first-point}

The paper omits a model based on topic variables due to compute feasibility. Due how the data was stored, each variable is a number that was converted to a factor using `as_factor` from `haven` (@citeHaven). These variables would often have 3 to 5 levels for each factor or more. This lead to large models for the topic model and even the personal model. This was simply not feasible, however the data processing prior to the decision to omit the topic model and simplify the personal model was kept in the paper.

## Model Limitations

## Next Steps

\newpage

\appendix

# Appendix {.unnumbered}

# Stratification Goals {#sec-stratification-goals}

## Gender

-   50% men

-   50% women

## Age

-   28% aged 18-34

-   33% aged 35-54

-   39% aged 55 and higher

## Region

-   7% in the Atlantic

-   23% in Quebec

-   38% in Ontario

-   32% in the West

## Language

-   80% French in Quebec, 20% English

-   10% French within the Atlantic

-   10% French nationally

# Response Quality {#sec-response-quality}

As per @citeCES, responses were kept according to the following on page 6 of the codebook:

During the data cleaning process, respondents were categorized based on their most important reason for removal. While respondents might be removed for multiple reasons, the most important reason is most relevant. Reasons for removal are, in order of importance:

1.  Internal survey testing or previews

2.  Ineligible - did not consent to survey

3.  Ineligible - not a Canadian citizen or permanent resident

4.  Ineligible - respondent under 18 years of age

5.  Over quota

6.  Incomplete - did not complete the survey

7.  Duplicate of previous respondent (identified by survey panel ID)

8.  Duplicate of a previous respondent (identified by IP address and the following demographics: year of birth, gender, education level, employment, religion, immigration status)

9.  Speeder (completed the survey in less than 500 seconds, or 8.3 minutes)

10. Postal code-province mismatch

11. Straightliner

12. Failed attention check

13. YOB mismatch

14. Province mismatch

15. Inattentive

16. Initial duplicate (identified by survey panel ID)

The following values are in the final dataset

17. Initial duplicate (identified by IP address and demographics)

18. PES speeders (respondents that took between 6 and 7.12 minutes to complete the PES)

19. Clean complete

\newpage

# References
